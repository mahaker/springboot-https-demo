LoadModule ssl_module modules/mod_ssl.so
LoadModule proxy_html_module modules/mod_proxy_html.so

SetEnv proxy-initial-not-pooled 1

ProxyRequests Off
SSLEngine On
SSLProxyEngine On
SSLProxyVerify none
SSLProxyCheckPeerCN off
SSLProxyCheckPeerName off

SSLCertificateFile /etc/httpd/keys/server.crt
SSLCertificateKeyFile /etc/httpd/keys/server.key

<Proxy *>
  Order deny,allow
  Allow from all
</Proxy>

ProxyHTMLLinks  a          href
ProxyHTMLLinks  area       href
ProxyHTMLLinks  link       href
ProxyHTMLLinks  img        src longdesc usemap
ProxyHTMLLinks  object     classid codebase data usemap
ProxyHTMLLinks  q          cite
ProxyHTMLLinks  blockquote cite
ProxyHTMLLinks  ins        cite
ProxyHTMLLinks  del        cite
ProxyHTMLLinks  form       action
ProxyHTMLLinks  input      src usemap
ProxyHTMLLinks  head       profile
ProxyHTMLLinks  base       href
ProxyHTMLLinks  script     src for

RequestHeader unset Accept-Language

FilterProvider proxyhtml   proxy-html "%{CONTENT_TYPE} =~ m|^text/html|"
# FilterProvider SUBSTITUTE SUBSTITUTE "%{CONTENT_TYPE} =~ m|^text/html|"
# FilterProvider SUBSTITUTE SUBSTITUTE "%{CONTENT_TYPE} =~ m|^text/css|"
# FilterProvider SUBSTITUTE SUBSTITUTE "%{CONTENT_TYPE} =~ m|^text/javascript|"
# FilterProvider SUBSTITUTE SUBSTITUTE "%{CONTENT_TYPE} =~ m|^application/javascript|"
FilterChain SUBSTITUTE iconv proxyhtml

ProxyPass /demo https://192.168.33.11
ProxyPassReverse /demo https://192.168.33.11

ProxyPass /api https://192.168.33.11/api

ProxyHTMLCharsetOut *
ProxyHTMLURLMap ^/([^/])|^/$ /demo/$1 R
